schema: '2.0'
stages:
  preprocess:
    cmd: ./src/data/preprocess.py data/raw/2013_Alberta_Floods-ontopic_offtopic.csv
  preprocess@0:
    cmd: head data/raw/supervisor_annotated_tweets.csv
    deps:
    - path: data/raw/supervisor_annotated_tweets.csv
      md5: 01f6a5aa8cf08b88843808265eb4ca48
      size: 134808
  preprocess@data/raw/2013_Alberta_Floods-ontopic_offtopic.csv:
    cmd: src/data/preprocess.py data/raw/2013_Alberta_Floods-ontopic_offtopic.csv
    deps:
    - path: data/raw/2013_Alberta_Floods-ontopic_offtopic.csv
      md5: c5a1d265c5f200f6d66359f926698226
      size: 1391617
    - path: src/data/preprocess.py
      md5: 7454b24d4d9f1e8cf0f6b6b3f3d13104
      size: 6658
  preprocess@data/raw/2013_Queensland_Floods-ontopic_offtopic.csv:
    cmd: src/data/preprocess.py data/raw/2013_Queensland_Floods-ontopic_offtopic.csv
    deps:
    - path: data/raw/2013_Queensland_Floods-ontopic_offtopic.csv
      md5: 662337576c2dc5105fe3ef290d01b001
      size: 1332585
    - path: src/data/preprocess.py
      md5: 7454b24d4d9f1e8cf0f6b6b3f3d13104
      size: 6658
  preprocess@data/tweets/supervisor_annotated_tweets.json:
    cmd: src/data/preprocess.py data/tweets/supervisor_annotated_tweets.json
    deps:
    - path: data/tweets/supervisor_annotated_tweets.json
      md5: c87c83439c5d08caee676b6ebdffd71d
      size: 5466648
    - path: src/data/preprocess.py
      md5: 7454b24d4d9f1e8cf0f6b6b3f3d13104
      size: 6658
  train:
    cmd: ./src/train/train.py --env sagemaker --model distilbert-base-uncased --label
      relevant --download_model -- data/processed/supervisor_annotated_tweets.csv
    deps:
    - path: src/train/train.py
      md5: 3d025fad7efc8180eebea6c6ed5c4714
      size: 9412
    outs:
    - path: eval.json
      md5: 880ffa6bba097e137ae27d53126570ac
      size: 276
  preprocess@data/raw/crisis_nlp_task_dmg.tsv:
    cmd: src/data/preprocess.py data/raw/crisis_nlp_task_dmg.tsv
    deps:
    - path: data/raw/crisis_nlp_task_dmg.tsv
      md5: 55b99d09e2cc9f859110612af9b8e043
      size: 895579
    - path: src/data/preprocess.py
      md5: 7454b24d4d9f1e8cf0f6b6b3f3d13104
      size: 6658
