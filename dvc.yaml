stages:
  preprocess:
    foreach:
      - ${supervisor.tweets}
      - ${alberta.raw}
      - ${queensland.raw}
      - ${crisis.raw}
    do:
      deps:
        - ${item}
        - src/data/preprocess.py
      cmd: src/data/preprocess.py ${item}
  train:
    deps: 
      - src/train/train.py
      - ${supervisor.processed}
  # NOTE: DVC can't interpolate a list, hence the need to write them down manually here everytime
    cmd: ./src/train/train.py --env "sagemaker" --model ${model} --label ${label} -- ${supervisor.processed} ${crisis.processed}
    metrics:
      - eval.json
